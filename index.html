<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Thea: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Thea
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Thea Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="https://raw.githubusercontent.com/sidch/Thea/master/Code/Documentation/images/header.jpg"  alt="Thea header image"/>
</div>
<h1><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></h1>
<p>A toolkit for visual computing with a focus on geometry processing, especially for interactive 3D modeling applications.</p>
<p>Source code is available at <a href="https://github.com/sidch/Thea">https://github.com/sidch/Thea</a>.<br />
 Online documentation is available at <a href="https://sidch.github.io/Thea">https://sidch.github.io/Thea</a>.</p>
<p>Author: <a href="https://www.cse.iitb.ac.in/~sidch">Siddhartha Chaudhuri</a>. Released under the BSD license (see <code>LICENSE.txt</code>).</p>
<p>If you find a bug, please let me know promptly. Thank you!</p>
<hr/>
<p> !!! <b>IMPORTANT</b> !!! If you last cloned this repository before Apr 27, 2020, please <b>delete your local copy and re-clone a fresh copy</b>. Some history was rewritten during a cleanup and commit refs have changed. If you just do a <code>git pull</code> without deleting and re-cloning, bad things can happen when the old and new histories get merged. </p><hr/>
<h2>What is <a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a>?</h2>
<p><em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> is a library of C++ classes for computer graphics, primarily for <a href="https://www.cse.iitb.ac.in/~cs749/spr2017">3D geometry processing</a>. It is the core library I use for nearly all my research projects, and it is also the core library for <a href="https://www.adobe.com/products/fuse.html">Adobe Fuse</a>, which I originally authored. As such, it is developed for personal use and its features reflect this: please do not write to me to asking for specific features to be included. However, over time, it has become quite general-purpose. Among its features are:</p>
<ul>
<li><b>Polygon mesh classes</b> with arbitrary per-element attributes, including heavyweight ones that store full mesh topology and a lightweight one designed only for rendering.</li>
<li>General <b>linear algebra</b> via <a href="http://eigen.tuxfamily.org">Eigen</a>, <b>geometric transformations</b> (e.g. rigid transforms), several additional convenience functions and classes (e.g. to wrap raw buffers as matrices), and easy-to-use interfaces to various <b>solver packages</b> (Eigen, NNLS, CSPARSE, ARPACK).</li>
<li>2, 3 and N-dimensional <b>geometric primitives</b>, including lines, line segments, rays, (hyper)planes, triangles (+ ray-triangle and triangle-triangle intersections), balls, axis-aligned boxes, oriented boxes, polygons and spline curves (+ fast spline-fitting to points).</li>
<li>An eclectic <b>collection of algorithms</b>, including a fast N-dimensional KD-tree (on points or mesh triangles), shortest paths in graphs, best-fit boxes and ellipsoids, singular value decomposition and PCA, iterative closest point (ICP), symmetry detection, convex hulls, connected components, surface parametrization (global and local), discrete Laplace-Beltrami operators, sampling points from meshes, mesh features (curvature, distance histogram, shape diameter, spin image), and some machine learning models.</li>
<li>Basic <b>image processing</b> (wrapper for <a href="http://freeimage.sourceforge.net/">FreeImage</a>).</li>
<li>A <b>plugin architecture</b> and included plugins providing easy interfaces to <a href="https://www.opengl.org/">OpenGL</a>, <a href="http://www.caam.rice.edu/software/ARPACK/">ARPACK</a> and <a href="http://people.sc.fsu.edu/~jburkardt/c_src/csparse/csparse.html">CSPARSE</a>. The OpenGL plugin optionally (and easily) compiles with an <a href="https://www.mesa3d.org/osmesa.html">OSMesa</a> driver to automatically create a headless CPU-only context.</li>
<li><b>Pure virtual wrappers</b> for several common classes (e.g. dense and sparse matrices, images) that allow safely passing such objects across shared library boundaries.</li>
<li>A variety of <b>utility classes</b> for filesystem navigation, I/O, serialization, timing, synchronization, hashing, logging, string manipulation/searching, memory allocation, bounded/sorted arrays, pseudo-random numbers, mathematics (including algebraic roots of polynomials upto degree 4) etc.</li>
<li>Several <b>bundled tools</b> written using the library, for 3D file viewing and annotation (<em>Browse3D</em>); offline rendering (<em>RenderShape</em>); mesh sampling (<em>MeshSample</em>), repair (<em>MeshFix</em>, different from <a href="https://sourceforge.net/p/meshfix/wiki/Home/">this one</a>), features (<em>MeshLocalFeatures</em>, <em>MeshGlobalFeatures</em>) and format conversion (<em>MeshConv</em>); rigid (<em>ShapeAlign</em>) and non-rigid (<em>Register</em>) shape registration; k-NN graphs of surface samples (<em>SampleGraph</em>) etc.</li>
</ul>
<p><b><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a> is constantly under development and a few parts are incomplete. Use at your own risk!</b> I do not provide any support (unless you have bugs to report), and I make no correctness or robustness guarantees for any part of the code. Parts of the library are reasonably battle-tested (e.g. in Fuse), and parts are one-off inclusions rarely used in anger or tested thoroughly.</p>
<p><em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> is heavily influenced by Morgan McGuire's <a href="https://casual-effects.com/g3d">G3D</a> library. It started out as an extension of G3D and still has significant chunks of code adapted from it (e.g. for binary/text I/O, plugin management, the rendersystem interface and OpenGL plugin, color handling, timers, quaternions, CRC32, atomic integers, and random numbers).</p>
<p>The <em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> library is not related to the independently and contemporaneously developed <a href="http://www.thearender.com">Thea Render</a> photorealistic rendering engine.</p>
<h2>Coding</h2>
<h3>Design principles</h3>
<p><em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> has a particular focus on being a foundation layer for interactive 3D modeling applications. It is written in standards-compliant C++11 for speed, and is designed with the following objectives in mind:</p><ul>
<li>Optimize for ease of use<ul>
<li>Clean, simple APIs are essential</li>
<li>Everything should be well-documented</li>
</ul>
</li>
<li>Except where some complexity is unavoidable for speed<ul>
<li>Even then, keep thing simple</li>
</ul>
</li>
<li>Reuse code as much possible<ul>
<li>E.g. with minimal external support (simple traits classes), a single kd-tree class (<code>KDTreeN</code>) can efficiently support any bounded objects in any-dimensional space under any metric</li>
</ul>
</li>
<li>Templates are ok, but only if tastefully used<ul>
<li>Use when every other option is much worse</li>
<li>Provide sensible defaults</li>
<li>Typedef common specializations (<code>Vector3 = Eigen::Matrix&lt;Real, 3, 1, MatrixLayout::COLUMN_MAJOR | Eigen::DontAlign&gt;</code>)</li>
<li><code>enable_if</code> + <code>type_traits</code> is often better than polymorphism</li>
</ul>
</li>
</ul>
<p>There are a few more specific design choices that apply to specific submodules. Since <em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> focuses on interactive 3D modeling, the main mesh class (<code>GeneralMesh</code>) is optimized for fast local updates on the CPU, with low-overhead synchronization with the GPU. Specifically:</p><ul>
<li>All references are pointers to persistent locations, not indices<ul>
<li>Vertex/face/edge lists are std::list</li>
<li>Pass a custom pooled allocator if you want fast small allocs and memory coherence</li>
</ul>
</li>
<li>Topology changes are fast (no large reallocs)</li>
<li>GPU updates are fine-grained (but could be more so)<ul>
<li>Only affected buffers are updated, in lazy batches</li>
</ul>
</li>
</ul>
<p>Contrast this with libraries optimized for static geometry and/or global processing passes, e.g. <a href="https://gfx.cs.princeton.edu/proj/trimesh2">trimesh2</a> or <a href="https://libigl.github.io">libigl</a>, which represent meshes as dense arrays of elements, referenced by integer indices. Of course, <em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> also has another mesh class (<code>DisplayMesh</code>) which has similar behaviour and is a good choice for more static applications, as well as a halfedge data structure (<code>DCELMesh</code>). In conjunction, <em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em>'s kd-tree class (<code>KDTreeN</code>), used to detect UI interactions with a mesh, tries to minimize the latency of recomputing the tree after the underlying geometry is changed.</p>
<h3>Examples</h3>
<p>Here is a simple "Hello World" example: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;Thea/MatVec.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[])</div><div class="line">{</div><div class="line">  <span class="keyword">using namespace </span><a class="code" href="d8/d8a/namespaceThea.html">Thea</a>;</div><div class="line"></div><div class="line">  Vector3 v(1.0, 2.0, 3.0);</div><div class="line">  Matrix3 m = <a class="code" href="d3/dbd/namespaceThea_1_1Math.html#a45f66d1b9a0a375433ce1e6c565a5324">Math::rotationArc</a>(Vector3(1, 0, 0), Vector3(0, 1, 0));</div><div class="line"></div><div class="line">  <span class="comment">// Automatically adds newline and synchronization to std::cout...</span></div><div class="line">  THEA_CONSOLE &lt;&lt; <span class="stringliteral">&quot;Hello world! The product is &quot;</span> &lt;&lt; <a class="code" href="d8/d8a/namespaceThea.html#ad42aa7f1f23b18c6cffa37f106e00eec">toString</a>(m * v);</div><div class="line">}</div></div><!-- fragment --><p>Here is a more complicated example, to perform 3D shape remeshing. We will do this in four steps:</p><ol type="1">
<li>Load an input polygon mesh</li>
<li>Create a signed distance field</li>
<li>Pass this to an implicit surface mesher</li>
<li>Save the output mesh</li>
</ol>
<p>Let's see the code for these steps one at a time. For simplicity, we'll omit some generic boilerplate code and <code>#include</code> directives, and assume </p><div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="d8/d8a/namespaceThea.html">Thea</a>;</div><div class="line"><span class="keyword">using namespace </span>Algorithms;</div><div class="line"><span class="keyword">using namespace </span>Graphics;</div></div><!-- fragment --><p> commands have been issued in advance.</p>
<p>First, we will load the input mesh: </p><div class="fragment"><div class="line"><span class="comment">// Read the input mesh</span></div><div class="line"><span class="keyword">typedef</span> GeneralMesh&lt;&gt; Mesh;</div><div class="line">MeshGroup&lt;Mesh&gt; m(<span class="stringliteral">&quot;Input&quot;</span>);</div><div class="line">m.load(<span class="stringliteral">&quot;source.obj&quot;</span>);</div></div><!-- fragment --><p> A <code>MeshGroup</code> is a hierarchical collection of meshes, encoding a scene graph. This matches the structure of most general-purpose mesh formats. A <code>GeneralMesh</code> object represents a node of this graph, packing vertex, edge and face information for a single component.</p>
<p>Next, we'll create a "functor" class that evaluates a signed distance field around the shape. It returns 0 for points on the surface of the shape, positive values for points outside the shape boundary, and negative values for points inside the shape boundary. </p><div class="fragment"><div class="line"><span class="comment">// Assumes consistent outward normals, and no nested structures.</span></div><div class="line"><span class="keyword">class </span>SignedDistance</div><div class="line">{</div><div class="line">  <span class="keyword">public</span>:</div><div class="line">    <span class="comment">// Constructor.</span></div><div class="line">    SignedDistance(MeshGroup&lt;Mesh&gt; &amp; m) : num_calls(0)</div><div class="line">    {</div><div class="line">      kdtree.add(m);</div><div class="line">      kdtree.init();</div><div class="line">      kdtree.enableNearestNeighborAcceleration();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Evaluate the signed distance from a given point.</span></div><div class="line">    Real operator()(Vector3 <span class="keyword">const</span> &amp; p)<span class="keyword"> const</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">      num_calls++;</div><div class="line"></div><div class="line">      <span class="keywordtype">double</span> d; Vector3 cp;</div><div class="line">      <span class="keyword">auto</span> index = kdtree.closestElement&lt;MetricL2&gt;(p, -1, &amp;d, &amp;cp);</div><div class="line">      Vector3 cn = kdtree.getElements()[index].getNormal();</div><div class="line">      <span class="keywordflow">return</span> cn.dot(cp - p) &lt; 0 ? d : -d;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// How many times was the kdtree queried?</span></div><div class="line">    <a class="code" href="d8/d8a/namespaceThea.html#a664b620b827057bcc5bd67f26c47b29b">intx</a> numCalls()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> num_calls; }</div><div class="line"></div><div class="line">  <span class="keyword">private</span>:</div><div class="line">    MeshKDTree&lt;Mesh&gt; kdtree;</div><div class="line">    <span class="keyword">mutable</span> <a class="code" href="d8/d8a/namespaceThea.html#a664b620b827057bcc5bd67f26c47b29b">intx</a> num_calls;</div><div class="line">};</div></div><!-- fragment --><p> Note that we are using a convenient specialization of the general kd-tree class (<code>KDTreeN</code>) for polygon meshes, for which we enable acceleration of nearest neighbor queries using a proxy kd-tree of sample points. The computation and use of this internal acceleration structure is abstracted away behind a single function call. Also, <em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> supports the L2 distance metric by default, but the kd-tree can take any other metric as a template argument, and limit the search to a maximum distance. <code>intx</code> is <em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em>'s default integer type used for indexing, defined as <code>std::ptrdiff_t</code>.</p>
<p>Now, we'll do the actual remeshing: </p><div class="fragment"><div class="line"><span class="comment">// Setup the remeshing</span></div><div class="line">Mesh::Ptr remeshed(<span class="keyword">new</span> Mesh);</div><div class="line">SignedDistance sd(m);</div><div class="line"></div><div class="line"><span class="comment">// Compute the bounding sphere, for a remeshing range and a scale parameter</span></div><div class="line">BestFitSphereN&lt;3&gt; bounds;</div><div class="line">PointCollectorN&lt; BestFitSphereN&lt;3&gt;, 3 &gt; c(&amp;bounds);</div><div class="line">c.addMeshVertices(m);</div><div class="line"></div><div class="line"><span class="comment">// Set a remeshing precision</span></div><div class="line"><span class="keywordtype">int</span> precision = 100;</div><div class="line"></div><div class="line"><span class="comment">// Do the remeshing (and time it)</span></div><div class="line">Stopwatch timer;</div><div class="line">timer.tick();</div><div class="line"></div><div class="line">  ImplicitSurfaceMesher::Options::Bloomenthal opts(</div><div class="line">    <span class="comment">/* cell_size = */</span> bounds.getDiameter() / precision,</div><div class="line">    <span class="comment">/* max_search_steps = */</span> precision);</div><div class="line"></div><div class="line">  ImplicitSurfaceMesher::meshBloomenthal(</div><div class="line">    &amp;sd,</div><div class="line">    bounds.getBall(),</div><div class="line">    c.vertices[0]-&gt;getPosition(),</div><div class="line">    opts,</div><div class="line">    *remeshed);</div><div class="line"></div><div class="line">timer.tock();</div><div class="line">THEA_CONSOLE &lt;&lt; sd.numCalls() &lt;&lt; <span class="stringliteral">&quot; kdtree NN queries in &quot;</span></div><div class="line">             &lt;&lt; 1000000 * timer.elapsedTime() / sd.numCalls() &lt;&lt; <span class="stringliteral">&quot;ns each&quot;</span>;</div></div><!-- fragment --><p> <code>Stopwatch</code> is one of many utility classes. <code>ImplicitSurfaceMesher</code> also optionally wraps CGAL's Boissonnat-Oudot polygonizer. <code>THEA_CONSOLE</code> is an object that behaves exactly like <code>std::cout</code> but automatically adds a newline at the end. <code>THEA_WARNING</code> and <code>THEA_ERROR</code> also prefix the line with the current time, source filename, line number, and a warning/error flag.</p>
<p>Finally, we'll save the output mesh: </p><div class="fragment"><div class="line"><span class="comment">// Save the output mesh</span></div><div class="line">MeshGroup&lt;Mesh&gt; out(<span class="stringliteral">&quot;Remeshed&quot;</span>);</div><div class="line">out.addMesh(remeshed);</div><div class="line">out.save(<span class="stringliteral">&quot;remeshed.obj&quot;</span>);</div></div><!-- fragment --><div class="image">
<img src="https://raw.githubusercontent.com/sidch/Thea/master/Code/Documentation/images/remesh.jpg"  alt="Bunny mesh, before and after remeshing"/>
</div>
<p>Figure: (Left) Input mesh. (Right) After remeshing. Artifacts are because of the specific (Bloomenthal) polygonizer used. <a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a>'s bundled <em>RenderShape</em> utility was used to render these images.</p>
<p>Here is a complete, compilable version of the above example: <a href="https://github.com/sidch/Thea/blob/master/Code/Documentation/samples/remesh.cpp">remesh.cpp</a></p>
<p>For some real-world samples, see the applications in the <code>Thea/Code/Source/Tools</code> folder.</p>
<h2>Installation</h2>
<p><em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> is written in standards-compliant C++11, and should compile with any recent compiler on Mac, Linux and Windows. It uses <a href="https:///cmake.org">CMake</a> as a cross-platform buildsystem. However, I do not normally work on Windows, and do not currently provide build instructions for this platform. I have successfully done Windows builds in the past and there is no reason why it should not work with a bit of effort getting the dependencies installed. I will try to add full Windows instructions in the future, time permitting.</p>
<h3>Installing the dependencies</h3>
<p><em><a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a></em> relies on <a href="https://www.boost.org">Boost</a>, <a href="https://eigen.tuxfamily.org">Eigen</a> (3.3 or later), <a href="https://code.google.com/archive/p/lib3ds">lib3ds</a>, <a href="http://freeimage.sourceforge.net">FreeImage</a> and <a href="http://www.caam.rice.edu/software/ARPACK">ARPACK</a>. (A couple of classes also depend on <a href="https://www.cgal.org">CGAL</a>, but these are optional &ndash; if CGAL is not found on the system, these classes will be omitted from the build.) A convenient script installs all of these on Unix-like systems (Mac and Linux), as follows. Both local (no root) and system-wide (needs root) installs are supported.</p>
<p>Assume <code>$basedir</code> is some directory where you're going to check out the source code, and <code>$prefix</code> is some directory where you'll install stuff (e.g. <code>$basedir/Installations</code> or <code>/usr/local</code>). </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd &quot;$basedir&quot;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;git clone --recursive https://bitbucket.org/sidch/theadepsunix TheaDepsUnix</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;cd TheaDepsUnix/Source</div></div><!-- fragment --><p> <b>For a local install (no root perms needed to write to <code>$prefix</code>):</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./install-defaults.sh --with-wxwidgets --prefix &quot;$prefix&quot; -j4</div></div><!-- fragment --><p> <b>For a system-wide install:</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo ./install-defaults.sh --with-wxwidgets --use-root --prefix &quot;$prefix&quot; -j4</div></div><!-- fragment --><p> <code>--use-root</code> will try to use <code>apt-get</code> on Ubuntu/Debian, omit it if you want to build everything from scratch regardless. <code>--with-wxwidgets</code> is needed to build <em>Browse3D</em>, a bundled GUI application for viewing 3D files: it can be omitted if so desired. Add <code>--with-osmesa</code> to install OSMesa for headless CPU-only rendering (good for remote servers). Replace 4 with the actual number of hardware threads on your system, typically 2, 4, or 8.</p>
<p>The above step will install the necessary libraries by compiling them from source (if not <code>apt-get</code>able) and placing the result in <code>$prefix</code>. To install an individual library, call <code>install.sh --with-&lt;package&gt; ...</code> with the same <code>--use-root</code>, <code>--prefix</code> etc arguments as above. Carefully check for errors (warnings are generally ok). If there are errors, you probably need to explicitly install some third-party libraries/tools &ndash; see the error messages &ndash; and rerun the command. E.g. I have found some barebones server installs without the <a href="https://www.zlib.net">zlib</a> or <a href="https://libexpat.github.io">Expat</a> development packages, required by Mesa: in this particular case, the source packages are included and you can use <code>./install.sh --with-expat --with-zlib ...</code>. <em>Make sure there are no errors in the output before proceeding further.</em></p>
<h3>Installing the <a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a> library, plugins and bundled tools</h3>
<p>Assuming there were no errors while installing the dependencies, execute the following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd &quot;$basedir&quot;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;git clone --recursive https://github.com/sidch/Thea</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;cd Thea/Code/Build</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;cmake -DCMAKE_INSTALL_PREFIX=&quot;$prefix&quot; -DCMAKE_BUILD_TYPE=RelWithDebInfo .</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;make -j4</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;make install    # add sudo if necessary</div></div><!-- fragment --><p> By default, CMake looks for the dependencies in the <code>CMAKE_INSTALL_PREFIX</code> directory. If for some reason the dependencies are located somewhere else, e.g. in <code>$deps</code>, you can point CMake to it by adding <code>-DTHEA_DEPS_ROOT="$deps"</code>. The bundled tools are installed to <code>$prefix/bin/Thea</code>: add this to your executable search path (e.g. the system <code>PATH</code> variable) as needed. A quick way to check if everything has installed correctly is to run </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$prefix/bin/Thea/Browse3D ../../Data/Models/teapot.obj</div></div><!-- fragment --><p> and see if a window pops up displaying a 3D teapot, or </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$prefix/bin/Thea/RenderShape ../../Data/Models/teapot.obj teapot.png 800 600</div></div><!-- fragment --><p> to render the teapot to an image file.</p>
<p>To build with OSMesa instead of the system OpenGL driver, add <code>-DWITH_OSMESA=true</code> to the CMake line above. The <em>RenderShape</em> tool will then use OSMesa. To run some test scripts (several probably out of date), run <code>make test</code> after building. To omit building the tests altogether, pass <code>-DWITH_TESTS=false</code> to CMake. To change the build type (by default <code>Release</code>), set <code>-DCMAKE_BUILD_TYPE=Debug|Release|RelWithDebInfo</code>.</p>
<hr/>
<p> <b>C++ versions</b>: <a class="el" href="d8/d8a/namespaceThea.html" title="Root namespace for the Thea library. ">Thea</a> itself follows the C++11 standard. However, other packages it depends on may enforce more recent standards: e.g. CGAL has recently moved to C++14 by default. Hence, the build script detects the latest standard (upto C++17) supported by the compiler and uses that to build. To force the compiler to operate in strict C++11 mode, pass <code>-DFORCE_CXX11=true</code> to CMake. </p><hr/>
<h2>Documentation</h2>
<p>To generate HTML documentation for the API, run <a href="http://www.doxygen.org">Doxygen</a> in the <code>Thea/Code/Documentation</code> folder. Then, open <code>html/index.html</code> in a browser.</p>
<p>This is probably the best place to start looking at the toolkit.</p>
<p>Note that many convenience types, such as <code>Vector3</code> and <code>Matrix4</code>, are typedefs (for <code>Eigen::Matrix&lt;Real, 3, 1, ...&gt;</code> and <code>Eigen::Matrix&lt;Real, 4, 4, ...&gt;</code> respectively) and don't show up in the Class Index. Some will show up in Namespaces &ndash;&gt; Namespace Members &ndash;&gt; Typedefs. For others, you will have to look at the source code. Documenting all of these properly is work-in-progress.)</p>
<h2>Using the library</h2>
<hr/>
<p> <b>GCC/Clang-specific</b>: You <b>MUST</b> compile with strict aliasing turned OFF. This is achieved with <code>-fno-strict-aliasing</code>. I also recommend <code>-Wall -g2 -O2</code> (all "W"arnings, debu"g"gable binaries, "O"ptimize for speed). <code>-O2</code> messes up the debugging a bit so turn it off temporarily if you can't track down your bug. </p><hr/>
<p>The usual command line to link your program with the library is: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;c++ -std=c++11 -Wall -g2 -O2 -fno-strict-aliasing \</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    -I&quot;$prefix/include&quot; -I&quot;$prefix/include/eigen3&quot; \</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &lt;source-files&gt; \</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    -L&quot;$prefix/lib&quot; -lThea \</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    -lfreeimageplus -lfreeimage -l3ds \</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    -lboost_filesystem-mt -lboost_system-mt -lboost_thread-mt \</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    -lm \</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    [-ldl] [-framework Carbon]</div></div><!-- fragment --><p>If you're using CMake for your own code, a convenient <code>FindThea.cmake</code> module in <code>Thea/Code/Build/Common/CMake/Modules</code> (or directly from <a href="https://github.com/sidch/CMake">https://github.com/sidch/CMake</a>) allows you to do <code>FIND_PACKAGE(Thea)</code>, including locating all the necessary dependencies. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
